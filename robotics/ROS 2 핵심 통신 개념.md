

ROS 2(Robot Operating System 2)는 로봇 소프트웨어 개발을 위한 프레임워크로, 분산 시스템을 효율적으로 구축할 수 있게 해준다. ROS 2 Humble의 핵심 통신 개념과 관련 명령어를 정리한다.

## 1. 노드(Node)

노드는 ROS의 기본 실행 단위이다. 각 노드는 특정 기능을 수행하는 독립적인 프로세스로, 다른 노드들과 통신하며 전체 시스템을 구성한다.

### 특징
- 독립적으로 실행되는 프로세스임
- 단일 목적을 가지는 모듈화된 코드임
- 다른 노드와 토픽, 서비스, 액션을 통해 통신함
- rclcpp(C++) 또는 rclpy(Python) 라이브러리로 구현함

### 관련 명령어
```bash
# 실행 중인 모든 노드 목록 표시
ros2 node list

# 특정 노드에 대한 정보 표시
ros2 node info /노드_이름

# 노드 실행
ros2 run 패키지_이름 실행_파일
```

## 2. 토픽(Topic)

토픽은 노드 간 비동기식 단방향 통신을 위한 메커니즘이다. 발행자(Publisher)와 구독자(Subscriber) 모델을 사용한다.

### 특징
- 지속적인 데이터 스트림에 적합함
- 일대다(one-to-many) 통신 지원함
- 비동기적으로 작동하여 발행자는 구독자의 존재 여부에 관계없이 메시지를 보낼 수 있음
- 센서 데이터, 로봇 상태 등 지속적인 정보 공유에 주로 사용함

### 관련 명령어
```bash
# 모든 토픽 목록 표시
ros2 topic list

# 토픽과 그 메시지 타입 함께 표시
ros2 topic list -t

# 특정 토픽에 대한 정보 표시
ros2 topic info /토픽_이름

# 토픽에 발행되는 메시지 실시간 출력
ros2 topic echo /토픽_이름

# 토픽에 메시지 발행
ros2 topic pub /토픽_이름 메시지_타입 메시지_내용

# 토픽의 발행 주기 측정
ros2 topic hz /토픽_이름
```

## 3. 서비스(Service)

서비스는 동기식 요청-응답 통신 방식이다. 클라이언트-서버 모델을 사용하며, 클라이언트가 요청하면 서버가 응답한다.

### 특징
- 일회성 작업에 적합함
- 요청이 완료될 때까지 클라이언트는 대기함
- 동기적으로 작동하여 응답을 받을 때까지 블로킹됨
- 상태 쿼리, 파라미터 설정, 간단한 계산 등에 사용함

### 관련 명령어
```bash
# 사용 가능한 모든 서비스 목록 표시
ros2 service list

# 서비스와 타입 함께 표시
ros2 service list -t

# 서비스의 타입 표시
ros2 service type /서비스_이름

# 특정 타입의 서비스 찾기
ros2 service find 서비스_타입

# 서비스 호출
ros2 service call /서비스_이름 서비스_타입 요청_내용
```

## 4. 액션(Action)

액션은 장기 실행 작업을 위한 고수준 통신 방식이다. 목표(Goal), 피드백(Feedback), 결과(Result)의 세 가지 통신 채널을 사용한다.

### 특징
- 취소 가능한 장기 실행 작업에 적합함
- 실행 중 상태 피드백을 제공할 수 있음
- 비동기적으로 작동하여 클라이언트가 다른 작업을 계속할 수 있음
- 로봇 내비게이션, 물체 조작 등 복잡한 작업에 사용함

### 관련 명령어
```bash
# 모든 액션 목록 표시
ros2 action list

# 액션과 타입 함께 표시
ros2 action list -t

# 특정 액션에 대한 정보 표시
ros2 action info /액션_이름

# 액션 목표 전송
ros2 action send_goal /액션_이름 액션_타입 목표_내용
```

## 정리

ROS 2의 통신 메커니즘은 각기 다른 용도에 최적화되어 있다.
- **노드**: 모듈화된 기능 단위
- **토픽**: 지속적인 데이터 스트림에 적합한 비동기 통신
- **서비스**: 일회성 요청-응답에 적합한 동기 통신
- **액션**: 피드백이 필요한 장기 실행 작업에 적합한 비동기 통신

