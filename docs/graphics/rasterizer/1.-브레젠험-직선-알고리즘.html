<!DOCTYPE html> <html lang="en"><head>
<title>1. 브레젠험 직선 알고리즘</title>
<base href="../..">
<meta name="pathname" content="graphics/rasterizer/1.-브레젠험-직선-알고리즘.html">
<meta name="description" content="psychehose.github.io - 1. 브레젠험 직선 알고리즘">
<meta property="og:title" content="1. 브레젠험 직선 알고리즘">
<meta property="og:description" content="psychehose.github.io - 1. 브레젠험 직선 알고리즘">
<meta property="og:type" content="website">
<meta property="og:url" content="graphics/rasterizer/1.-브레젠험-직선-알고리즘.html">
<meta property="og:image" content="undefined">
<meta charset="UTF-8"><meta property="og:site_name" content="psychehose.github.io"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager mod-macos is-hidden-frameless native-scrollbars show-inline-title show-ribbon show-view-header minimal-default-light minimal-default-dark minimal-readable colorful-headings links-int-on links-ext-on full-width-media trim-cols sidebar-tabs-default is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="1._브레젠험_직선_알고리즘_0">1. 브레젠험 직선 알고리즘</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-h4"><h4 data-heading="알고리즘의 목적" dir="auto" class="heading" id="알고리즘의_목적_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>알고리즘의 목적</h4></div><div class="el-p"><p dir="auto">Bresenham's Line Algorithm은 두 점 사이의 직선을 픽셀 격자 위에 그리는 효율적인 방법이다. 화면은 이산적인 (정수 좌표라는 뜻) 픽셀로 구성되어 있기 때문에 수학적으로 연속적인 직선을 어떤 픽셀에 그릴지 결정해야 한다. 따라서 부동소수점 연산 대신에 정수 연산만 한다.</p></div><div class="el-h4"><h4 data-heading="아이디어" dir="auto" class="heading" id="아이디어_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>아이디어</h4></div><div class="el-p"><p dir="auto">내가 이해한 것에 의하면 브레젠험 직선 알고리즘의 핵심은 '오차(Error)'다.<br>
오차는 이상적인 직선 (수학적으로 연속적인 직선)과 실제로 그려진 픽셀들 사이의 수직거리다.<br>
즉, 오차 = 직선의 y 좌표 - 현재 픽셀의 y좌표이다.</p></div><div class="el-p"><p dir="auto">예를 들면 어떤 직선의 방정식가 있고 (5, 2.7)를 지난다고 가정한다. 만약 우리가 (5,2)를 선택했다면 오차는 2.7 - 2 = 0.7이 되는 것이다.</p></div><div class="el-p"><p dir="auto">브레젠험 직선 알고리즘은 x좌표가 이동할 때마다 오차를 누적하고 이 오차가 0.5를 넘으면 다음 픽셀은 위쪽으로 이동 시킨다. (y -&gt; y+1)</p></div><div class="el-h4"><h4 data-heading="동작 방식" dir="auto" class="heading" id="동작_방식_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>동작 방식</h4></div><div class="el-p"><p dir="auto">먼저 기울기를 생각해야한다. 기울기는 dy / dx로 정의하고 m이라고 가정한다.</p></div><div class="el-p"><p dir="auto">만약 0 &lt; m &lt;=  1 이라면 x를 움직이고 y가 이동할 지 계산한다. 즉 주도축은 x축이다.<br>
만약  m &gt;= 1 이라면 y를 움직이고 x가 이동할 지 계산한다. 즉 주도축은 y축이다.</p></div><div class="el-p"><p dir="auto">이제 오차를 어떻게 누적하는지 살펴보자.</p></div><div class="el-p"><p dir="auto">기울기가 0 &lt; m &lt;= 1, 현재 픽셀이 (x,y)에 있다고 가정한다.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">주도축은 x축이므로 x를 이동 시킨다. x' = x + 1</li>
<li data-line="1" dir="auto">현재 오차에 기울기를 더함 error = error + m (기울기는 x가 변할 때의 y의 변화값임)</li>
</ol></div><div class="el-p"><p dir="auto">만약 여기에서 error &gt;= 0.5이라면:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>y 이동 y' = y + 1</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>error = error - 1</li>
</ul></div><div class="el-p"><p dir="auto">만약 아니라면:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>y를 유지 y' = y</li>
</ul></div><div class="el-p"><p dir="auto">동작 방식은 이렇지만 아직 손볼 곳이 좀 남아있다. 왜냐하면 브레젠험 직선 알고리즘은 부동 소수점 연산을 사용하지 않는다. 그래서 정리를 통해서 정수 연산으로 바꿔줘야 한다.</p></div><div class="el-p"><p dir="auto">오차를 누적할 때의 식이 error = error + m인데 여기에서 m은 기울기라 유리수가 나올 수 있다. 그래서 양변에 dx를 곱해줘서 정수 연산을 유지할 수 있다.</p></div><div class="el-p"><p dir="auto">error <em> dx = error </em> dx + (m <em> dx = dy) 따라서 모든 error 대신에 error </em> dx를 사용한다. 이를 scaled_error라고 해보자. 그러면 아래처럼 정리할 수 있다.</p></div><div class="el-p"><p dir="auto">error <em> dx &gt;= 0.5이라면 -&gt; scaled_error &gt;= (1/2) </em> dx</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>y 이동 y' = y + 1</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>scaled_error = scaled_error - dx</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>scaled_error = scaled_error + dy</li>
</ul></div><div class="el-p"><p dir="auto">마찬가지로 아직 1/2 * dx 니까 양변에 또 2를 곱해주면 된다.</p></div><div class="el-p"><p dir="auto">정리하면 아래와 같다.</p></div><div class="el-pre"><pre><code data-line="0">error_2scaled = 0  // error × dx × 2
threshold = dx     // dx/2 × 2

for each x:
    if error_2scaled &gt;= threshold:  // 완전한 정수 비교!
        y++
        error_2scaled = error_2scaled - (dx × 2)  // dx×2를 빼기
    error_2scaled = error_2scaled + (dy × 2)      // dy×2를 더하기
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">이걸 C++ 코드로 작성하면</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded">
<span class="token keyword">void</span> <span class="token function">bresenham</span><span class="token punctuation">(</span><span class="token keyword">int</span> x1<span class="token punctuation">,</span> <span class="token keyword">int</span> y1<span class="token punctuation">,</span> <span class="token keyword">int</span> x2<span class="token punctuation">,</span> <span class="token keyword">int</span> y2<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">int</span> dx <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>x2 <span class="token operator">-</span> x1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> dy <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>y2 <span class="token operator">-</span> y1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> stepX <span class="token operator">=</span> <span class="token punctuation">(</span>x1 <span class="token operator">&lt;</span> x2<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> stepY <span class="token operator">=</span> <span class="token punctuation">(</span>y1 <span class="token operator">&lt;</span> y2<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>dx <span class="token operator">&gt;=</span> dy<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> x <span class="token operator">=</span> x1<span class="token punctuation">;</span>
    <span class="token keyword">int</span> y <span class="token operator">=</span> y1<span class="token punctuation">;</span>
    <span class="token keyword">int</span> error <span class="token operator">=</span> dx<span class="token punctuation">;</span> <span class="token comment">// 초기 오차 = dx (0.5 × 2 × dx와 같음)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> dx<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">drawPixel</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> dx<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 마지막 픽셀이 아닌 경우</span>
        error <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> dy<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token operator">&gt;=</span> <span class="token number">2</span> <span class="token operator">*</span> dx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          y <span class="token operator">+=</span> stepY<span class="token punctuation">;</span>
          error <span class="token operator">-=</span> <span class="token number">2</span> <span class="token operator">*</span> dx<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        x <span class="token operator">+=</span> stepX<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> x <span class="token operator">=</span> x1<span class="token punctuation">;</span>
    <span class="token keyword">int</span> y <span class="token operator">=</span> y1<span class="token punctuation">;</span>
    <span class="token keyword">int</span> error <span class="token operator">=</span> dy<span class="token punctuation">;</span> <span class="token comment">// 초기 오차 = dy (0.5 × 2 × dy와 같음)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> dy<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">drawPixel</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> dy<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 마지막 픽셀이 아닌 경우</span>
        error <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> dx<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token operator">&gt;=</span> <span class="token number">2</span> <span class="token operator">*</span> dy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          x <span class="token operator">+=</span> stepX<span class="token punctuation">;</span>
          error <span class="token operator">-=</span> <span class="token number">2</span> <span class="token operator">*</span> dy<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        y <span class="token operator">+=</span> stepY<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="코드 개선 사항" dir="auto" class="heading" id="코드_개선_사항_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>코드 개선 사항</h4></div><div class="el-p"><p dir="auto">구현한 코드를 보면 주도축을 분기해서 경우에 따라 처리했다. 다만 실제 코드에서는 좀 더 간결하게 주도축을 미리 나누지 않고 하나의 루프에서 처리한다.</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">void</span> <span class="token function">bresenham_optimized</span><span class="token punctuation">(</span><span class="token keyword">int</span> x0<span class="token punctuation">,</span> <span class="token keyword">int</span> y0<span class="token punctuation">,</span> <span class="token keyword">int</span> x1<span class="token punctuation">,</span> <span class="token keyword">int</span> y1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> dx <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>x1 <span class="token operator">-</span> x0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> dy <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>y1 <span class="token operator">-</span> y0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> sx <span class="token operator">=</span> x0 <span class="token operator">&lt;</span> x1 <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> sy <span class="token operator">=</span> y0 <span class="token operator">&lt;</span> y1 <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> err <span class="token operator">=</span> dx <span class="token operator">-</span> dy<span class="token punctuation">;</span> <span class="token comment">// 핵심: 두 축의 이동 균형 지표</span>

  <span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">drawPixel</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span> y0<span class="token punctuation">,</span> <span class="token string">"o"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>x0 <span class="token operator">==</span> x1 <span class="token operator">&amp;&amp;</span> y0 <span class="token operator">==</span> y1<span class="token punctuation">)</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> e2 <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> err<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> moved_x <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> moved_y <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token comment">// X 이동 조건: e2 &gt; -dy</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e2 <span class="token operator">&gt;</span> <span class="token operator">-</span>dy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      err <span class="token operator">-=</span> dy<span class="token punctuation">;</span>
      x0 <span class="token operator">+=</span> sx<span class="token punctuation">;</span>
      moved_x <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Y 이동 조건: e2 &lt; dx</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e2 <span class="token operator">&lt;</span> dx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      err <span class="token operator">+=</span> dx<span class="token punctuation">;</span>
      y0 <span class="token operator">+=</span> sy<span class="token punctuation">;</span>
      moved_y <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    step<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">이 코드는 직관적으로 이해해보는 것이 목표다. 핵심 아이디어는 균형 관리다.</p></div><div class="el-p"><p dir="auto">알고리즘의 목표는 각 픽셀에서 '실제 직선과의 거리'를 최소화하는 것이 목표다. 그래서 균형은 매 순간 '가장 가까운 픽셀'을 선택하는 것이다. 그러기 위해서는 dx:dy 비율을 유지하면서 이동 해야 한다.<br>
이 비율을 실시간으로 체크하면서 균형을 추적 해야한다. 이 알고리즘에서는 dx -dy를 이용해서 균형을 추적 한다.</p></div><div class="el-p"><p dir="auto">int err = dx - dy;에서 dx는 x축 이동 할당량, dy는 y축 이동 할당량이라고 생각하면 err은 균형의 기울어진 정도로 생각할 수 있다.</p></div><div class="el-p"><p dir="auto">먼저 x 좌표의 이동 조건을 보자.</p></div><div class="el-pre"><pre><code data-line="0">if (2 * err &gt; -dy) 이 식을 변형을 하면

2 * err &gt; -dy
2 * (dx - dy) &gt; -dy
2 * dx &gt; dy
dx &gt; (1 / 2) * dy

로 변형을 할 수 있다.
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">즉, dx &gt; (1 / 2) * dy 식은 'x로 이동 할당량이 y 이동 할당량의 절반보다 크면' 이라고 해석할 수 있다.<br>
다시 말해서 x축이 충분히 여유가 있으니 x를 한칸 이동하고 y축에게 빚을 지는 것이다. 이때 -dy 해야하는데 빼기를 하는 이유는 균형에 대한 정의를 (dx - dy)로 정의 했기 때문이다.</p></div><div class="el-p"><p dir="auto">y 좌표의 이동조건을 보자.</p></div><div class="el-pre"><pre><code data-line="0">if (2 * err &lt; dx) 이 식을 변형을 하면
2 * err &lt; dx
2 * (dx - dy) &lt; dx
dx &lt; 2 * dy
(1/2) * dx &lt; dy
로 변형할 수 있다.
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">즉 (1/2) * dx &lt; dy은 x 이동이 여유가 없으니 y를 이동하고 x축에 빚을 진다. ( +dx)</p></div><div class="el-p"><p dir="auto">이러한 방식으로 루프 안에서 균형을 계속 맞춰가면서 픽셀을 찍어주면 두 점 사이의 직선과 근사한 직선을 그릴 수 있게 된다.</p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="graphics/rasterizer/1.-브레젠험-직선-알고리즘.html#1._브레젠험_직선_알고리즘_0" data-path="#1._브레젠험_직선_알고리즘_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="1. 브레젠험 직선 알고리즘">1. 브레젠험 직선 알고리즘</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="graphics/rasterizer/1.-브레젠험-직선-알고리즘.html#알고리즘의_목적_0" data-path="#알고리즘의_목적_0"><div class="tree-item-inner heading-link" heading-name="알고리즘의 목적">알고리즘의 목적</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="graphics/rasterizer/1.-브레젠험-직선-알고리즘.html#아이디어_0" data-path="#아이디어_0"><div class="tree-item-inner heading-link" heading-name="아이디어">아이디어</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="graphics/rasterizer/1.-브레젠험-직선-알고리즘.html#동작_방식_0" data-path="#동작_방식_0"><div class="tree-item-inner heading-link" heading-name="동작 방식">동작 방식</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="graphics/rasterizer/1.-브레젠험-직선-알고리즘.html#코드_개선_사항_0" data-path="#코드_개선_사항_0"><div class="tree-item-inner heading-link" heading-name="코드 개선 사항">코드 개선 사항</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>