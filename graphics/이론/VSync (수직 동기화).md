## 요약

화면이 Frame을 받을 준비가 되면 GPU에게 V-Sync를 보내고 GPU는 프레임을 화면에 전달

순서
1. 화면(Display)은 한 프레임을 완전히 보여준 뒤, 다음 프레임을 받을 준비가 되면 V-Sync 신호를 보냄
2. 엔진(GPU)은 이 신호를 받아야만 비로소 자신이 그려놓은 새 프레임을 화면에 전달


### 작동 방식

GPU는 더블 버퍼링 기술을 이용함. 더블 버퍼링이란 GPU는 메모리에 최소 두개의 그림판, 프레임 버퍼를 가진다는 것을 의미함.

* 프론트버퍼: 화면에 직접 연결된 버퍼로 우리가 볼 수 있음
* 백 버퍼: GPU가 다음에 보여줄 프레임을 그리는 작업 공간으로 우리가 볼 수 없음. 렌더링 작업은 여기에서 발생


1. 사용자가 화면 (프론트 버퍼)을 보는 동안 GPU는 백버퍼에서 다음 프레임을 준비함. 
2. GPU가 백 버퍼에 다 그리면 V-Sync 신호를 기다림
3. V-Sync 신호 발생
4. Buffer Swap / Flip (버퍼 교체)
	1. 백 버퍼는 프론트 버퍼가 되고 프론트 버퍼는 백버퍼가 됨.
	2. 데이터 복사가 아닌 포인터를 변경하기 때문에 매우 빠름


#### PC 게임은 V-Sync 옵션이 있는 경우가 있는데 그 이유?

* 인풋 랙 (Input Lag)
* 최대 성능 확인

인풋 랙은 V-Sync의 "기다리는 특성 때문에 발생한다.

1. [사용자 액션]: 사용자가 마우스를 클릭하여 총을 쏨 (시간: 0ms)
2. [GPU 렌더링]: GPU가 총을 쏘는 장면을 백 버퍼에 즉시 그리기 시작함 (완료까지 5ms 소요, 총 시간: 5ms)
3. [V-Sync의 대기]: 문제 발생함. GPU는 그림을 다 그렸지만, 아직 화면의 V-Sync 신호가 오지 않았음. 다음 신호는 16.67ms 시점에 올 예정. GPU는 약 11ms를 아무것도 안 하고 기다려야 합니다.
4. [버퍼 교체]: V-Sync 신호가 오자, GPU가 백 버퍼를 프론트 버퍼로 교체(총 시간: 16.67ms)
5. [화면 표시]: 사용자는 마우스를 클릭한 지 약 16.67ms 후에야 총알이 나가는 것을 보게됨.


#### V-Sync를 껐을 때 발생할 수 있는 문제

1. 화면 찢어짐
	*  화면 업데이트보다 GPU가 프레임을 그리는 속도가 더 빠름
	* 윗부분은 이전 프레임, 아랫부분은 새로 그린 프레임
	* 화면의 중간에 가로로 선이 그어진 것처럼 위아래가 어긋남
 ![Screen Tearing](https://upload.wikimedia.org/wikipedia/commons/0/03/Tearing_%28simulated%29.jpg)


2. 버벅거림
	* Stutter
		* GPU가 너무 느리게 그려서 프레임 완성이 안되어 있음, 그러면 디스플레이는 이전 페이지를 한번 더 보여줌 (프레임 드랍)
		* 사용자는 순간적으로 화면이 멈칫
	* Jank
		* GPU가 프레임을 그리는 속도가 일정하지 않는 경우
		* 사용자는 애니메이션이 부드럽게 이어지지 않고 뚝뚝 끊기거나 울렁거리는 것처럼 보임